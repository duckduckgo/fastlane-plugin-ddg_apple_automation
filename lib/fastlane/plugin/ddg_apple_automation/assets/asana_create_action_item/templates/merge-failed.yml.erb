name: Merge <%= tag %> to <%= base_branch %>
html_notes: |
  <body>
    The <code><%= tag %></code> release has been successfully tagged and published in GitHub releases, <%= '' %>
    but merging to <code><%= base_branch %></code> failed. Please resolve conflicts and merge <code><%= tag %></code> tag to <code><%= base_branch %></code> manually.<br>
    <br>
    First, disable branch protection on the apple-browsers repository:
    <ul>
      <li>Open the <a href='https://github.com/duckduckgo/apple-browsers/settings/rules/3717807'>Main Branch branch protection ruleset settings</a></li>
      <li>Click on the 'Active' enforcement status dropdown and change it to 'Disabled'</li>
      <li>Scroll down to the bottom and click 'Save changes'</li>
      <li>Authenticate with GitHub to approve the ruleset change</li>
    </ul>
    <br>
    Next, issue the following git commands:
    <ul>
      <li><code>git fetch origin --tags</code></li>
      <li><code>git checkout <%= base_branch %></code> switch to <%= base_branch %></li>
      <li><code>git pull origin <%= base_branch %></code> pull the latest code</li>
      <li><code>git merge <%= tag %></code>
        <ul>
          <li>Resolve conflicts as needed</li>
          <li>Run iOS, macOS and BSK unit and integration tests locally or create a separate branch and open a draft PR to let the CI handle it.</li>
          <li>When merging a hotfix tag into an internal release branch, you will get conflicts in version and build number xcconfig files:
            <ul>
              <li>In the version file: accept the internal version number (higher).</li>
              <li>In the build number file: accept the hotfix build number (higher). This step is very important in order to calculate the build number of the next internal release correctly.</li>
            </ul></li>
        </ul></li>
      <li><code>git push origin <%= base_branch %></code> push merged branch</li>
    </ul>
    <br>
    Finally, re-enable branch protection:
    <ul>
      <li>Open the <a href='https://github.com/duckduckgo/apple-browsers/settings/rules/3717807'>Main Branch branch protection ruleset settings</a></li>
      <li>Click on the 'Disabled' enforcement status dropdown and change it to 'Active'</li>
      <li>Scroll down to the bottom and click 'Save changes'</li>
      <li>Authenticate with GitHub to approve the ruleset change</li>
    </ul>
    <br>
    Complete this task when ready and proceed with testing the build.<br>
    <br>
    ðŸ”— Workflow URL: <a href='<%= workflow_url %>'><%= workflow_url %></a>.
  </body>
